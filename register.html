<!DOCTYPE html>
<html lang="en">

<style>
  ::-webkit-scrollbar {
    background-color: #3f4547;
    width: 10px;
  }
   
  /* Handle */
  ::-webkit-scrollbar-thumb {
    background: #69bf72; 
    border-radius: 10px;
  }
</style>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://smtpjs.com/v3/smtp.js"></script>  

</head>
<body>

<!-- form for google docs -->
<!-- <form 
  method="POST" 
  action="https://script.google.com/macros/s/AKfycbx8Xl2qsl4hUuIfE63L3wOfdZEeIHcL86wg7nLoTM3TPNeCDmlg5Mhg9GOVAgpLaIWJ/exec"
>
  <input name="Email" type="email" placeholder="Email" required>

  <input name="PHONE" type="email" placeholder="Email" required>
  <input name="Name" type="text" placeholder="Name" required>
  <button type="submit">Send</button>
</form> -->


<section style="background-color: #eee; padding: 5%;">
  <div class="container h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-lg-12 col-xl-11">
        <div class="card text-black" style="border-radius: 25px;">
          <div class="card-body p-md-5">
            <div class="row justify-content-center">
              <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1">

                <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Registration</p>

                <form class="mx-1 mx-md-4">


                <div class="d-flex flex-row align-items-center mb-4">
                    <i class="fas fa-user fa-lg me-3 fa-fw"></i>
                    <div class="form-outline flex-fill mb-0">
                      <input type="text" id="team_name" class="form-control" />
                      <label class="form-label" for="form3Example1c">Team Name</label>
                    </div>
                  </div>

                  <div class="d-flex flex-row align-items-center mb-4">
                    <i class="fas fa-user fa-lg me-3 fa-fw"></i>
                    <div class="form-outline flex-fill mb-0">
                      <input type="text" id="name" class="form-control" />
                      <label class="form-label" for="form3Example1c">Your Name</label>
                    </div>
                  </div>

                  <div class="d-flex flex-row align-items-center mb-4">
                    <i class="fas fa-envelope fa-lg me-3 fa-fw"></i>
                    <div class="form-outline flex-fill mb-0">
                      <input type="text" id="clg-name" class="form-control" />
                      <label class="form-label" for="form3Example3c">College Name</label>
                    </div>
                  </div>

                  <div class="d-flex flex-row align-items-center mb-4">
                    <i class="fas fa-envelope fa-lg me-3 fa-fw"></i>
                    <div class="form-outline flex-fill mb-0">
                      <input type="email" id="email" class="form-control" />
                      <label class="form-label" for="form3Example3c">Email</label>
                    </div>
                  </div>

                  <div class="d-flex flex-row align-items-center mb-4">
                    <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
                    <div class="form-outline flex-fill mb-0">
                      <input type="text" id="phone" class="form-control" />
                      <label class="form-label" for="form3Example4c">Phone</label>
                    </div>
                  </div>

                  <div class="d-flex flex-row align-items-center mb-4">
                    <i class="fas fa-key fa-lg me-3 fa-fw"></i>
                    <div class="form-outline flex-fill mb-0">
                      <input type="number" min="1" max="3" id="team_size" class="form-control" />
                      <label class="form-label" for="form3Example4cd">Team Size</label>
                    </div>
                  </div>
                  <p style="color: #69bf72; text-align: center; font-size: 0.8rem">
                    <a href='./Privacy Policy.pdf' style="color:#69bf72" target="_blank">Privacy Policy</a> | <a href='./Terms and Conditions.pdf' style="color:#69bf72" target="_blank">Terms and Condition</a>
                  </p>
                  <!-- <div class="form-check d-flex justify-content-center mb-5">
                    <input class="form-check-input me-2" type="checkbox" value="" id="form2Example3c" />
                    <label class="form-check-label" for="form2Example3">
                      I agree all statements in <a href="#!">Terms of service</a>
                    </label>
                  </div> -->

                  <div class="d-flex justify-content-center mx-4 mb-3 mb-lg-4">
                    <input type="button" onclick="makePayment()" class="btn btn-primary btn-lg" value="Register">
                  </div>

                </form>

              </div>
              <div class="col-md-10 col-lg-6 col-xl-7 d-flex align-items-center order-1 order-lg-2">

                <img src="./assets/img/Hackman_5_logo.png"
                  class="img-fluid" alt="Sample image">


              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<script>

function makePayment(){

  // var name = $("#name").val();
  const team_name=document.getElementById('team_name').value;
  const name=document.getElementById('name').value;
  const email=document.getElementById('email').value;
  const phone=document.getElementById('phone').value;
  const team_size=document.getElementById('team_size').value;
  const clg_name=document.getElementById('clg-name').value;
  const total_amount = team_size*300*100;
  const gsheetskey = "AIzaSyAUXO4n4cszqf-jPsEjOJaCK5QOKRdnKWg";

  let paymentid;

  // console.log(team_name);
  // console.log(phone);
  // console.log(document.getElementById('email').value);

  if(team_size > 0 && team_size<4){
    var options = {
    

    // "key": "rzp_test_nLYkSOe9jqHeVG",//(Hod) 
    // "key": "rzp_live_SNuGTvcFhUHMYy",//(Rahul)
    // Enter the Key ID generated from the Dashboard
    
    // rzp_live_SNuGTvcFhUHMYy(Rahul key id)
    "amount": total_amount, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
    "currency": "INR",
    "name": "Hackman 5.0",
    "description": "",
    "image": "https://drive.google.com/uc?export=download&id=1pHdCX3PjzCWQ7aU3ppjDbuCMDD0NnjWe",
    //"order_id": "order_IluGWxBm9U8zJ8", //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
    "handler": function (response){
      paymentid = response.razorpay_payment_id; 
      console.log(team_name);
      console.log(name);
      console.log(email);
      console.log(phone);
      console.log(team_size);
      console.log(paymentid);
      Email.send({
        Host: "smtp.elasticemail.com",
        Username: "wearehackman@gmail.com",
        Password: "835787E9251682A4D3475142DAD15A41E667",
        Port: 2525,
        To: email,
        From: "wearehackman@gmail.com",
        Subject: "Registration Successfull",
        Body: `Hey ${name}, \n 
        Congratulations on successfull registration for Hackman v5.0
        Our team will reach out to you through WhatsApp
        Please verify your details:
        Name: ${name}
        Team-Name: ${team_name}
        College-name: ${clg_name}
        Team-size: ${team_size}
        Email: ${email}
        Ph. Number: ${phone}`,

      })
      .then(function (message) {
        alert("mail sent successfully")
      });
      Email.send({
        Host: "smtp.elasticemail.com",
        Username: "wearehackman@gmail.com",
        Password: "835787E9251682A4D3475142DAD15A41E667",
        Port: 2525,
        To: "wearehackman@gmail.com",
        From: "wearehackman@gmail.com",
        Subject: "Registration Successfull",
        Body: `Hey ${name},
        Congratulations on successfull registration for Hackman v5.0
        Our team will reach out to you through WhatsApp
        Please verify your details:
        Name: ${name}
        Team-Name: ${team_name}
        College-name: ${clg_name}
        Team-size: ${team_size}
        Email: ${email}
        Ph. Number: ${phone}`,
      })
      .then(function (message) {
        console.log("mail sent successfully")
      });

      alert("Registration successfull");

// if(!isset($_POST['submit']))
// {

// // echo "error; you need to submit the form!";
// }
// $name = $_GET['name'];
// $visitor_email = $_GET['email'];


// //Validate first
// if(empty($name)||empty($visitor_email)) 
// {
// echo "Name and email are mandatory!";
// exit;
// }
// $email_from = 'tom@amazing-designs.com';//<== update the email address
// $email_subject = "New Form submission";
// $email_body = "You have received a new message from the user $name.\n".
//  "Here is the message:\n".

// $to = "khan.koder@gmail.com";//<== update the email address
// $headers = "From: $email_from \r\n";
// $headers .= "Reply-To: $visitor_email \r\n";

// mail($to,$email_subject,$email_body,$headers);

//done. redirect to thank-you page.

        //add the google sheets api
        window.location = "index.html";
    },
    "prefill": {
        "name": name,
        "email": email,
        "contact": phone
    },
    "theme": {
        "color": "#3399cc"
    }
  };
  var rzp1 = new Razorpay(options);
  rzp1.open();
  rzp1.on('payment.failed', function (response){
        // alert(response.error.code);
        alert(response.error.description);
        window.location = "register.html";
});
  }else{
    alert("The Team size varies from 1 to 3. Please adjust your team accordingly")
    window.location = "register.html";
  }
}
</script>

</body>



</html>